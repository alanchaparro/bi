# Environment example (no secrets)
# Production must use DB users and explicit origins.

PYTHONUNBUFFERED=1
APP_ENV=dev
APP_PORT=8000
DB_BOOTSTRAP_ON_START=true
DB_DEMO_PROBE_ON_START=true
DASHBOARD_PORT=5000
API_V1_PORT=8000
API_V1_WORKERS=2
FRONTEND_V1_PORT=5173
FRONTEND_PROD_PORT=8080
LAN_HTTP_PORT=80

# PostgreSQL (compose service: postgres)
POSTGRES_DB=cobranzas_prod
POSTGRES_USER=cobranzas_user
POSTGRES_PASSWORD=change_me_postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql+psycopg2://cobranzas_user:change_me_postgres@postgres:5432/cobranzas_prod
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# Security
JWT_SECRET_KEY=change_me_jwt_secret
JWT_REFRESH_SECRET_KEY=change_me_refresh_secret
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=120
JWT_REFRESH_EXPIRE_MINUTES=43200
AUTH_MAX_FAILED_ATTEMPTS=5
AUTH_LOCK_MINUTES=15
AUTH_LOGIN_RATE_LIMIT=10
AUTH_LOGIN_RATE_WINDOW_SECONDS=60
WRITE_RATE_LIMIT=30
WRITE_RATE_WINDOW_SECONDS=60

# CORS
CORS_ORIGINS=http://localhost:8080,http://localhost:5173

# Legacy analytics read (temporary compatibility)
ANALYTICS_LEGACY_BASE_URL=http://dashboard:5000
ANALYTICS_LEGACY_TIMEOUT_SECONDS=120

# Dual sync
SYNC_WINDOW_MONTHS=3
SYNC_MAX_ROWS=300000
SYNC_MAX_ROWS_ANALYTICS=300000
SYNC_MAX_ROWS_CARTERA=200000
SYNC_MAX_ROWS_COBRANZAS=250000
SYNC_MAX_ROWS_CONTRATOS=300000
SYNC_MAX_ROWS_GESTORES=300000
SYNC_SAFE_MODE=true
SYNC_PREVIEW_ENABLED=true
SYNC_PREVIEW_SAMPLE_ROWS=20000
SYNC_PREVIEW_SAMPLE_TIMEOUT_SECONDS=8
SYNC_WORKER_IDLE_SLEEP_SECONDS=1.5
SYNC_FETCH_BATCH_SIZE=5000
SYNC_FETCH_BATCH_SIZE_ANALYTICS=20000
SYNC_FETCH_BATCH_SIZE_CARTERA=10000
SYNC_FETCH_BATCH_SIZE_COBRANZAS=12000
SYNC_FETCH_BATCH_SIZE_CONTRATOS=20000
SYNC_FETCH_BATCH_SIZE_GESTORES=20000
SYNC_CHUNK_SIZE=10000
SYNC_CHUNK_SIZE_ANALYTICS=12000
SYNC_CHUNK_SIZE_CARTERA=7000
SYNC_CHUNK_SIZE_COBRANZAS=16000
SYNC_CHUNK_SIZE_CONTRATOS=12000
SYNC_CHUNK_SIZE_GESTORES=12000
SYNC_LOW_IMPACT_MODE=true
SYNC_LOW_IMPACT_FULL_ALL_ONLY=true
SYNC_LOW_IMPACT_FETCH_BATCH_SIZE=1000
SYNC_LOW_IMPACT_CHUNK_SIZE=500
SYNC_LOW_IMPACT_CHUNK_PAUSE_MS=40
SYNC_MYSQL_INCREMENTAL_PUSHDOWN=true
SYNC_STAGING_RETENTION_DAYS=14
SYNC_PERSIST_STAGING_ROWS=false
READ_FROM_FACT_TABLES=true

# MySQL source (legacy/sync)
# Si la app corre en Docker y MySQL esta en el host: use MYSQL_HOST=host.docker.internal (Win/Mac)
# En Linux Docker: use la IP del host (ej. 172.17.0.1) o host.docker.internal si esta soportado
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=change_me
MYSQL_DATABASE=cobranzas
MYSQL_SSL_DISABLED=true

# Demo users are valid only in APP_ENV=dev
DEMO_ADMIN_USER=admin
DEMO_ADMIN_PASSWORD=change_me_demo_admin_password
DEMO_ANALYST_USER=analyst
DEMO_ANALYST_PASSWORD=change_me_demo_analyst_password

# Frontend
VITE_API_BASE_URL=http://localhost:8000/api/v1
